<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Optum Open Source RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Optum Open Source Atom Feed"><title data-react-helmet="true">Knative Channel Sans Kafka Admin Rights | Optum Open Source</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://optum.github.io/blog/2021/09/27/kn-kafka-topic-channel"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Knative Channel Sans Kafka Admin Rights | Optum Open Source"><meta data-react-helmet="true" name="description" content="Knative"><meta data-react-helmet="true" property="og:description" content="Knative"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2021-09-27T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/itsmurugappan"><meta data-react-helmet="true" property="article:tag" content="engineering,knative,channel,broker,kafka,message,events,cloudevents"><link data-react-helmet="true" rel="icon" href="/img/open_source.svg"><link data-react-helmet="true" rel="canonical" href="https://optum.github.io/blog/2021/09/27/kn-kafka-topic-channel"><link data-react-helmet="true" rel="alternate" href="https://optum.github.io/blog/2021/09/27/kn-kafka-topic-channel" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://optum.github.io/blog/2021/09/27/kn-kafka-topic-channel" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.50574292.css">
<link rel="preload" href="/assets/js/runtime~main.8dcb1336.js" as="script">
<link rel="preload" href="/assets/js/main.2b64b905.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Optum(R)_4C.png" alt="Optum Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/Optum(R)_4C.png" alt="Optum Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Optum Open Source</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Open Source Program Office</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/philosophy">Philosophy</a></li><li><a class="dropdown__link" href="/docs/guilds">Guilds</a></li><li><a class="dropdown__link" href="/docs/givingprogram">Giving Program</a></li><li><a class="dropdown__link" href="/docs/memberships">Memberships</a></li><li><a class="dropdown__link" href="/communities">Our Projects</a></li><li><a class="dropdown__link" href="/contributors">Our Engineers</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link" href="/blog">Blog</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/blog/tags/culture">Culture</a></li><li><a class="dropdown__link" href="/blog/tags/engineering">Engineering</a></li><li><a class="dropdown__link" href="/blog/tags/ml-ai">ML/AI</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://www.youtube.com/watch?v=9sdASFlw0As" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Why Contribute to Open Source?<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/Optum" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_a9qW thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_uKok margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Kvuv"><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2022/02/08/spark-part2-refactoring">Migrating ETL to Spark - Refactoring</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2022/01/25/data-streaming-at-scale-with-benthos">Data Streaming At Scale With Benthos</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2022/01/14/spark-series-part-1">Migrating ETL to Spark - Motivation and Quick Start</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2021/11/15/package-model-analytic-reuse">Packaging models and analytics for reuse -  API vs. Inner Source.</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2021/10/21/s3-to-azure-copy">Copying data between AWS and Azure</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_rzP5" itemprop="headline">Knative Channel Sans Kafka Admin Rights</h1><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2021-09-27T00:00:00.000Z" itemprop="datePublished">September 27, 2021</time> Â· <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/itsmurugappan" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_o0gy" src="https://github.com/itsmurugappan.png" alt="Murugappan Chetty"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/itsmurugappan" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Murugappan Chetty</span></a></div><small class="avatar__subtitle" itemprop="description">Principal Software Engineer</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><h3 class="anchor anchorWithStickyNavbar_mojV" id="knative">Knative<a class="hash-link" href="#knative" title="Direct link to heading">â€‹</a></h3><p>Knative enables you to run a serverless platform on your own terms. It has 2 independent components, Serving and Eventing. Serving runs your application as a serverless container in a kubernetes cluster, while eventing provides the tooling to source and orchestate events to your application.</p><p>Once you get past the initial attraction of scale to 0 that serving provides, you will quickly take notice of knative eventing capabilities mentioned below</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="event-source">Event Source<a class="hash-link" href="#event-source" title="Direct link to heading">â€‹</a></h3><p>Component provided by Knative Eventing to source events from a actual event producer like kafka/rabbit mq/github etc. and deliver it to a addressable resource (any resource which has a uri, can be knative service/kubernetes service or just an uri). There is an event source for almost all commonly used event producers. Either its community maintained or custom implementation.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="brokers-and-triggers">Brokers and Triggers<a class="hash-link" href="#brokers-and-triggers" title="Direct link to heading">â€‹</a></h3><p>Source delivers events 1-1. A fan out model with filters would be great for orchestrating events. Thats what Brokers and Triggers provide. Broker as the name suggest is the event ingress and hub, triggers route the events based on filters.</p><p>For brokers, triggers and sources to work in harmony they need to speak the common language and that is provided by <a href="https://cloudevents.io" target="_blank" rel="noopener noreferrer">Cloud Events</a>.</p><p>Below image shows how the events are sourced and routed to different knative and kubernetes service.</p><p><img src="/assets/images/brokertrigger-b4491535bdff9e7c778019e6d1d035a5.jpg" width="955" height="442"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="whats-a-knative-channel">What&#x27;s a Knative Channel<a class="hash-link" href="#whats-a-knative-channel" title="Direct link to heading">â€‹</a></h3><p>Brokers, as pointed above is the events hub, so it needs a state store, which is provided by <code>Channels</code>. By default Brokers use InMemory Channels. In a production environment, you would need a more robust store, for which Knative provides <code>KafkaChannel</code> and <code>NatsChannel</code>. Its worth mentioning here that there are broker implementations (kafka broker and rabbit mq broker) which dont require channels.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="kafka-topic-channel">Kafka Topic Channel<a class="hash-link" href="#kafka-topic-channel" title="Direct link to heading">â€‹</a></h3><p>The kafka channel or kafka broker would need admin rights as topics are created for each resource. This would require the Knative operator to main a kafka cluster, which might be cumbersome. Hence we implemented a custom knative channel based on <code>kafka topic</code>.</p><p>Kafka Topic Channel or ktc conforms to the knative spec, hence brokers and triggers would work as is. It is a single tenant solution, each Broker resource would require separate kafka topic and subsequent kafka topic channel. The channel instance would be created in the user namespace.</p><p><a href="https://github.com/Optum/kafka-topic-channel" target="_blank" rel="noopener noreferrer">Details with examples</a></p><p>Bring your own kafka topic, get a knative channel!</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="related-resources">Related Resources<a class="hash-link" href="#related-resources" title="Direct link to heading">â€‹</a></h4><ul><li><a href="https://www.youtube.com/watch?v=gXuW9mvj6xM&amp;list=PLnPNqTSUj2hKH5W7GWOZ-mzcw4r3O4bHj&amp;index=2&amp;t=14s" target="_blank" rel="noopener noreferrer">Kubecon demo on cloud events, knative brokers and triggers</a></li><li><a href="https://itsmurugappan.medium.com/writing-custom-knative-eventing-sources-92f6904131ad" target="_blank" rel="noopener noreferrer">Event Sources</a></li></ul></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_h6_j"><div class="col"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/engineering">engineering</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/knative">knative</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/channel">channel</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/broker">broker</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/kafka">kafka</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/message">message</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/events">events</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/cloudevents">cloudevents</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2021/10/21/s3-to-azure-copy"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Copying data between AWS and Azure</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2021/09/08/AI Racing League"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">AI Racing League</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_cNA8 thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#knative" class="table-of-contents__link toc-highlight">Knative</a></li><li><a href="#event-source" class="table-of-contents__link toc-highlight">Event Source</a></li><li><a href="#brokers-and-triggers" class="table-of-contents__link toc-highlight">Brokers and Triggers</a></li><li><a href="#whats-a-knative-channel" class="table-of-contents__link toc-highlight">What&#39;s a Knative Channel</a></li><li><a href="#kafka-topic-channel" class="table-of-contents__link toc-highlight">Kafka Topic Channel</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/communities">Our Projects</a></li><li class="footer__item"><a class="footer__link-item" href="/contributors">Our Engineers</a></li></ul></div><div class="col footer__col"><div class="footer__title">Administration</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/optumcoc">Contributor Code of Conduct</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/optumicla">Individual Contributor License Agreement</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/optumlic">Project Licensing</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/attribution">Code Attribution</a></li></ul></div><div class="col footer__col"><div class="footer__title">Work With Us</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Optum" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="mailto:opensource@optum.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>opensource@optum.com<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://careers.unitedhealthgroup.com/search-jobs?kw=&amp;sp=&amp;re=US&amp;jf=20" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Career Opportunities<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items"><li class="footer__item"><a href="https://www.optum.com/terms-of-use.html" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Terms of use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.optum.com/privacy-policy.html" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Optum, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.8dcb1336.js"></script>
<script src="/assets/js/main.2b64b905.js"></script>
</body>
</html>