<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Optum Open Source RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Optum Open Source Atom Feed"><title data-react-helmet="true">Packaging models and analytics for reuse -  API vs. Inner Source. | Optum Open Source</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://optum.github.io/blog/2021/11/15/package-model-analytic-reuse"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Packaging models and analytics for reuse -  API vs. Inner Source. | Optum Open Source"><meta data-react-helmet="true" name="description" content="Packaging models and analytics for reuse - API vs. Inner Source."><meta data-react-helmet="true" property="og:description" content="Packaging models and analytics for reuse - API vs. Inner Source."><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2021-11-15T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://www.linkedin.com/in/wrschneider"><meta data-react-helmet="true" property="article:tag" content="ML-AI"><link data-react-helmet="true" rel="icon" href="/img/open_source.svg"><link data-react-helmet="true" rel="canonical" href="https://optum.github.io/blog/2021/11/15/package-model-analytic-reuse"><link data-react-helmet="true" rel="alternate" href="https://optum.github.io/blog/2021/11/15/package-model-analytic-reuse" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://optum.github.io/blog/2021/11/15/package-model-analytic-reuse" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.50574292.css">
<link rel="preload" href="/assets/js/runtime~main.8dcb1336.js" as="script">
<link rel="preload" href="/assets/js/main.2b64b905.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Optum(R)_4C.png" alt="Optum Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/Optum(R)_4C.png" alt="Optum Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Optum Open Source</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Open Source Program Office</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/philosophy">Philosophy</a></li><li><a class="dropdown__link" href="/docs/guilds">Guilds</a></li><li><a class="dropdown__link" href="/docs/givingprogram">Giving Program</a></li><li><a class="dropdown__link" href="/docs/memberships">Memberships</a></li><li><a class="dropdown__link" href="/communities">Our Projects</a></li><li><a class="dropdown__link" href="/contributors">Our Engineers</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link" href="/blog">Blog</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/blog/tags/culture">Culture</a></li><li><a class="dropdown__link" href="/blog/tags/engineering">Engineering</a></li><li><a class="dropdown__link" href="/blog/tags/ml-ai">ML/AI</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://www.youtube.com/watch?v=9sdASFlw0As" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Why Contribute to Open Source?<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/Optum" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_a9qW thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_uKok margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Kvuv"><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2022/02/08/spark-part2-refactoring">Migrating ETL to Spark - Refactoring</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2022/01/25/data-streaming-at-scale-with-benthos">Data Streaming At Scale With Benthos</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2022/01/14/spark-series-part-1">Migrating ETL to Spark - Motivation and Quick Start</a></li><li class="sidebarItem_CF0Q"><a aria-current="page" class="sidebarItemLink_miNk sidebarItemLinkActive_RRTD" href="/blog/2021/11/15/package-model-analytic-reuse">Packaging models and analytics for reuse -  API vs. Inner Source.</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2021/10/21/s3-to-azure-copy">Copying data between AWS and Azure</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_rzP5" itemprop="headline">Packaging models and analytics for reuse -  API vs. Inner Source.</h1><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2021-11-15T00:00:00.000Z" itemprop="datePublished">November 15, 2021</time> Â· <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://www.linkedin.com/in/wrschneider" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_o0gy" src="https://github.com/wrschneider.png" alt="Bill Schneider"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://www.linkedin.com/in/wrschneider" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Bill Schneider</span></a></div><small class="avatar__subtitle" itemprop="description">Sr. Principal Engineer</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><h3 class="anchor anchorWithStickyNavbar_mojV" id="packaging-models-and-analytics-for-reuse---api-vs-inner-source">Packaging models and analytics for reuse - API vs. Inner Source.<a class="hash-link" href="#packaging-models-and-analytics-for-reuse---api-vs-inner-source" title="Direct link to heading">â€‹</a></h3><p>Various teams in Optum produce models or analytics. Simplified examples of &quot;models&quot;:</p><ul><li>risk scoring for a patient - given history for a patient, how likely are they to be admitted to the hospital as an inpatient?</li><li>grouping claims into an episode - what is the all-in cost for a procedure including follow-up care?</li><li>calculating quality measures - in a patient population, what percentage got their flu shots this year?</li></ul><p>Models can be either rules-based and explicitly coded, or ML-based.</p><p>Once we have models like these, how can that IP be reused in a different context? The goal should be to be able to
compose various individual models or analytics into new products.</p><p>There are a few different approaches typically used:</p><p><strong>REST APIs</strong> The team that creates a model can deploy their model as a REST API for other teams to invoke. This
analytic-as-a-service approach
works well for APIs that are called inside of a workflow--for example, making a decision about an individual patient
at point of care, or analytics that can be recomputed incrementally without full history.</p><p>The benefit of APIs is that the provider and consumer tech stack doesn&#x27;t need to align, and that consumers will see changes to the model immediately when it is deployed with no action required. The big downside is latency: REST doesn&#x27;t work well in batch workflows if processing each individual record requires an HTTPS round-trip. The other downside is operational coupling: the team that produces the model needs to not only maintain the logic of the model itself, but also is responsible for availability and performance for the REST API. Also the provider can&#x27;t make breaking changes without an API versioning strategy, keeping the old versions of the API live until consumers can migrate.</p><p><strong>Batch API</strong> A variation of the analytic-as-a-service approach to address the HTTPS round-trip issue with batch data, for analytics that involve aggregating historical data and can&#x27;t recompute on incremental data alone. The payload goes through a file transfer (SFTP, Azure blob storage, AWS S3 etc.) and REST endpoints are only used to mediate the process with pointers
to the out-of-band payload (similar to
<a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/claim-check" target="_blank" rel="noopener noreferrer">claim check pattern</a>). Still, you have to ship
data back and forth and the file transfer time can add significant overhead to overall turnaround time. Also, you still
have operational coupling and concerns over breaking changes, although this could beinsulated from the end user interactions.</p><p><strong>Inner source</strong> Instead of offering analytics as a service, you can package an analytic as an artifact that can be
embedded as a dependency into any other application. This could either be a JAR or DLL that gets included as a build
dependency, or the output of an ML framework (PyTorch, Tensorflow etc.)</p><p>The benefits here are: you bring the analytic to the data, so there is no
overhead in transferring data back and forth. The model provider has no operational responsibility or cost. Consumers
can continue using old versions of artifacts until they are ready to upgrade. The downsides are: consumers have to
take action to upgrade. There are tech stack dependencies -- if the analytic is a JAR and your team is standardized on
.NET, or the ML framework doesn&#x27;t have an SDK for your platform, you can&#x27;t call it in-process. Tech stack alignment is
less of an issue for batch process, since different stages of a batch workflow can be on different technologies as long as
they share a file system.</p><p>There is no one right answer, and we use different approaches in different situations. To make a decision you have to ask yourself a series of questions and decide how important each one is:</p><ul><li>How often does the underlying model/analytic change?</li><li>As a consumer, do you want to see changes right away or do you want to be in control over moving to the new version?</li><li>Is this a real-time interaction or a batch process?</li><li>How big are concerns over data transfer overhead or request latency?</li><li>If you need a real-time interaction, are you on compatible tech stacks?</li></ul><p>Also note that <em>these approaches are not mutually exclusive.</em> If you are a team providing a model or analytic, and you
think about how to package your model for reuse via inner-source, you can <em>also</em> provide that same model as a REST API endpoint.</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_h6_j"><div class="col"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/ml-ai">ML-AI</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2022/01/14/spark-series-part-1"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Migrating ETL to Spark - Motivation and Quick Start</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2021/10/21/s3-to-azure-copy"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Copying data between AWS and Azure</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_cNA8 thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#packaging-models-and-analytics-for-reuse---api-vs-inner-source" class="table-of-contents__link toc-highlight">Packaging models and analytics for reuse - API vs. Inner Source.</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/communities">Our Projects</a></li><li class="footer__item"><a class="footer__link-item" href="/contributors">Our Engineers</a></li></ul></div><div class="col footer__col"><div class="footer__title">Administration</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/optumcoc">Contributor Code of Conduct</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/optumicla">Individual Contributor License Agreement</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/optumlic">Project Licensing</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/attribution">Code Attribution</a></li></ul></div><div class="col footer__col"><div class="footer__title">Work With Us</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Optum" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="mailto:opensource@optum.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>opensource@optum.com<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://careers.unitedhealthgroup.com/search-jobs?kw=&amp;sp=&amp;re=US&amp;jf=20" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Career Opportunities<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items"><li class="footer__item"><a href="https://www.optum.com/terms-of-use.html" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Terms of use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.optum.com/privacy-policy.html" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Optum, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.8dcb1336.js"></script>
<script src="/assets/js/main.2b64b905.js"></script>
</body>
</html>