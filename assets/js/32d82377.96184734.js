"use strict";(self.webpackChunkoptum_github_io=self.webpackChunkoptum_github_io||[]).push([[8260],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return m}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(a),m=r,d=u["".concat(l,".").concat(m)]||u[m]||h[m]||o;return a?n.createElement(d,s(s({ref:t},c),{},{components:a})):n.createElement(d,s({ref:t},c))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,s=new Array(o);s[0]=u;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var p=2;p<o;p++)s[p]=a[p];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},4888:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return i},contentTitle:function(){return l},metadata:function(){return p},assets:function(){return c},toc:function(){return h},default:function(){return m}});var n=a(7462),r=a(3366),o=(a(7294),a(3905)),s=["components"],i={title:"Data Streaming At Scale With Benthos",author:"Mihai Todor",author_title:"Principal Software Engineer",author_url:"https://www.linkedin.com/in/mtodor",author_image_url:"https://github.com/mihaitodor.png",tags:["Benthos","Golang","Kafka","Data Streaming","ETL","Engineering"],hide_table_of_contents:!1},l=void 0,p={permalink:"/blog/2022/01/25/data-streaming-at-scale-with-benthos",source:"@site/blog/2022-01-25-data-streaming-at-scale-with-benthos.md",title:"Data Streaming At Scale With Benthos",description:"Data Streaming At Scale With Benthos",date:"2022-01-25T00:00:00.000Z",formattedDate:"January 25, 2022",tags:[{label:"Benthos",permalink:"/blog/tags/benthos"},{label:"Golang",permalink:"/blog/tags/golang"},{label:"Kafka",permalink:"/blog/tags/kafka"},{label:"Data Streaming",permalink:"/blog/tags/data-streaming"},{label:"ETL",permalink:"/blog/tags/etl"},{label:"Engineering",permalink:"/blog/tags/engineering"}],readingTime:2.7,truncated:!0,authors:[{name:"Mihai Todor",title:"Principal Software Engineer",url:"https://www.linkedin.com/in/mtodor",imageURL:"https://github.com/mihaitodor.png"}],frontMatter:{title:"Data Streaming At Scale With Benthos",author:"Mihai Todor",author_title:"Principal Software Engineer",author_url:"https://www.linkedin.com/in/mtodor",author_image_url:"https://github.com/mihaitodor.png",tags:["Benthos","Golang","Kafka","Data Streaming","ETL","Engineering"],hide_table_of_contents:!1},prevItem:{title:"Migrating ETL to Spark - Refactoring",permalink:"/blog/2022/02/08/spark-part2-refactoring"},nextItem:{title:"Migrating ETL to Spark - Motivation and Quick Start",permalink:"/blog/2022/01/14/spark-series-part-1"}},c={authorsImageUrls:[void 0]},h=[{value:"Data Streaming At Scale With Benthos",id:"data-streaming-at-scale-with-benthos",children:[],level:3}],u={toc:h};function m(e){var t=e.components,i=(0,r.Z)(e,s);return(0,o.kt)("wrapper",(0,n.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h3",{id:"data-streaming-at-scale-with-benthos"},"Data Streaming At Scale With Benthos"),(0,o.kt)("p",null,"Optum's ",(0,o.kt)("a",{parentName:"p",href:"https://opensource.optum.com/blog/2021/08/24/OSPO%20culture"},"Open Source Program Office (OSPO)")," recently launched an Open Source sponsorship program, committing an initial $50K total donations to external Open Source projects of notable merit. ",(0,o.kt)("a",{parentName:"p",href:"https://benthos.dev/"},"Benthos"),", the stream processor for mundane tasks, was selected as the first project to receive a donation through this program."),(0,o.kt)("p",null,"This article is the first part of a longer series of posts about Benthos, where I'll share some insight into why we decided to adopt Benthos as the core data streaming engine for Optum's new ",(0,o.kt)("a",{parentName:"p",href:"https://martinfowler.com/articles/data-mesh-principles.html"},"Data Mesh")," solution."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Benthos logo",src:a(8293).Z,width:"640",height:"400"})),(0,o.kt)("p",null,"Benthos is a stateless data streaming engine written entirely in ",(0,o.kt)("a",{parentName:"p",href:"https://go.dev/"},"Go")," and compiled as a single static binary. It enables data engineers to configure a pipeline of processing steps that are to be executed on messages as they flow from the source to the sink during runtime. Through back pressure mechanisms, it ensures at-least-once delivery when connecting to sources and sinks which support this, without persisting in-flight messages in any temporary storage. It has a wide range of ",(0,o.kt)("a",{parentName:"p",href:"https://www.benthos.dev/docs/about/#components"},"builtin connectors")," that are expanding constantly and it's very easy to ",(0,o.kt)("a",{parentName:"p",href:"https://www.benthos.dev/docs/guides/getting_started"},"deploy")," in production. This project was started over 6 years ago by ",(0,o.kt)("a",{parentName:"p",href:"https://www.jeffail.uk/"},"Ashley Jeffs")," (he goes by Ash), who is still maintaining it and is currently ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/Jeffail/benthos/issues/1071"},"preparing")," for the 4th major release."),(0,o.kt)("p",null,"At Optum, we have large volumes of disperse data in various formats spread across many different datastores, some of which are legacy systems that are slowly getting phased out. Benthos allows us to perform data movement from these systems to modern cloud-based datastores, where data analysts can perform their work more efficiently. While Benthos doesn't provide connectors for all the types of sources and sinks that we need, it does come with a rich ",(0,o.kt)("a",{parentName:"p",href:"https://pkg.go.dev/github.com/Jeffail/benthos/v3/public/service"},"Golang API")," for writing custom plugins that allow us to expand its functionality and tailor it for our needs."),(0,o.kt)("p",null,"Since Benthos can easily be run in Kubernetes clusters, it enables us to build robust and efficient systems for terabyte-size workloads which scale horizontally. In order to monitor our production workloads, we leveraged the various Prometheus-compatible ",(0,o.kt)("a",{parentName:"p",href:"https://www.benthos.dev/docs/components/metrics/about"},"metrics")," and Jaeger-compatible ",(0,o.kt)("a",{parentName:"p",href:"https://www.benthos.dev/docs/components/tracers/about"},"traces")," that Benthos emits for each component of its configured processing pipeline. For complex workflows, it can be configured to add extra metrics using the ",(0,o.kt)("a",{parentName:"p",href:"https://www.benthos.dev/docs/components/processors/metric"},(0,o.kt)("inlineCode",{parentName:"a"},"metric")," processor"),"."),(0,o.kt)("p",null,"Additionally, we use distributed event streaming platforms, such as ",(0,o.kt)("a",{parentName:"p",href:"https://kafka.apache.org/"},"Apache Kafka"),", as message buses for various realtime and batch ETL (Extract, Transform, Load) workflows. Benthos comes with an embedded DSL called ",(0,o.kt)("a",{parentName:"p",href:"https://www.benthos.dev/docs/guides/bloblang/about"},"Bloblang"),", which lets us express complex transformations of structured data, such as schema migrations and validations."),(0,o.kt)("p",null,"During our Benthos adoption, we pushed upstream several new adaptors and features that were quickly approved and merged. Getting code merged into Benthos has been one of my best experiences in contributing to Open Source so far."),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://studio.benthos.dev/"},"Benthos Studio")," has been released recently to aid users in designing, visualising and testing Benthos streaming pipelines and it's proving very valuable when building new pipelines from scratch or navigating complex ones."),(0,o.kt)("p",null,"If you'd like to learn more about Benthos, Ash's ",(0,o.kt)("a",{parentName:"p",href:"https://www.youtube.com/c/Jeffail"},"YouTube channel")," is a good place to start. Also, there is a vibrant ",(0,o.kt)("a",{parentName:"p",href:"https://www.benthos.dev/community"},"community")," around it, where Ash and other users like myself are available to answer any questions that you might have."),(0,o.kt)("p",null,"Try ",(0,o.kt)("a",{parentName:"p",href:"https://benthos.dev/"},"Benthos")," today if you haven't already!"))}m.isMDXComponent=!0},8293:function(e,t,a){t.Z=a.p+"assets/images/benthos.dev-2441cb2ce43bf8abd226cbb6412b455e.svg"}}]);